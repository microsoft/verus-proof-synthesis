--- benchmarks/verified-ironkv/unverified_nolemma/delegation_map_v__impl4__all_keys_agree.rs

+++ benchmarks/verified-ironkv/unverified/delegation_map_v__impl4__all_keys_agree.rs

@@ -23,8 +23,6 @@

 }
 
 type ID = EndPoint;
-
-pub trait VerusClone: Sized {}
 
 pub enum Ordering {
     Less,
@@ -38,10 +36,16 @@

     }
 }
 
+pub trait VerusClone: Sized {}
+
 pub trait KeyTrait: Sized {
     spec fn zero_spec() -> Self where Self: std::marker::Sized;
 
     spec fn cmp_spec(self, other: Self) -> Ordering;
+}
+
+spec fn sorted<K: KeyTrait>(s: Seq<K>) -> bool {
+    forall|i, j| #![auto] 0 <= i < j < s.len() ==> s[i].cmp_spec(s[j]).lt()
 }
 
 pub struct KeyIterator<K: KeyTrait + VerusClone> {
@@ -58,7 +62,6 @@

             && self.k.get_Some_0().cmp_spec(other.k.get_Some_0()).lt())
     }
 }
-
 
 impl<K: KeyTrait + VerusClone> KeyIterator<K> {
     pub open spec fn get_spec(&self) -> &K
@@ -97,10 +100,6 @@

     }
 }
 
-
-spec fn sorted<K: KeyTrait>(s: Seq<K>) -> bool {
-    forall|i, j| #![auto] 0 <= i < j < s.len() ==> s[i].cmp_spec(s[j]).lt()
-}
 
 struct StrictlyOrderedVec<K: KeyTrait> {
     v: Vec<K>,
@@ -183,6 +182,23 @@

                 == dst@
     }
 
+    #[verifier::external_body]
+    proof fn almost_all_keys_agree(&self, lo: usize, hi: usize, id: &ID)
+        requires
+            self.valid(),
+            0 <= lo <= hi < self.lows.keys@.len(),
+            forall|i| #![auto] lo <= i < hi ==> self.lows@[self.lows.keys@[i]]@ == id@,
+        ensures
+            self.range_consistent(
+                &KeyIterator::new_spec(self.lows.keys@[lo as int]),
+                &KeyIterator::new_spec(self.lows.keys@[hi as int]),
+                id,
+            ),
+        decreases hi - lo,
+    {
+        unimplemented!()
+    }
+
     proof fn all_keys_agree(&self, lo: usize, hi: usize, id: &ID)
         requires
             self.valid(),
@@ -198,4 +214,5 @@

     }
 }
 
+
 } // verus!